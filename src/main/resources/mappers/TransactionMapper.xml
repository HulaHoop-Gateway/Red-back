<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hulahoop.redback.transaction.model.dao.TransactionMapper">

    <!-- ðŸ”¹ ì „ì²´ ê±°ëž˜ ë‚´ì—­ ì¡°íšŒ -->
    <select id="selectAllTransactions" resultType="com.hulahoop.redback.transaction.model.dto.TransactionDTO">
        SELECT
        transation_num         AS transationNum,
        member_code            AS memberCode,
        amount_used            AS amountUsed,
        payment_date           AS paymentDate,
        status,
        start_date             AS startDate,
        end_date               AS endDate,
        merchant_code          AS merchantCode,
        original_transation_num AS originalTransationNum   <!-- â­ ì¶”ê°€ë¨ -->
        FROM T_TransactionHistory
        ORDER BY transation_num ASC
    </select>

    <!-- ðŸ”¥ ìƒˆë¡œìš´ ê±°ëž˜(insert) -->
    <insert id="insertTransaction" parameterType="com.hulahoop.redback.transaction.model.dto.TransactionDTO">
        INSERT INTO T_TransactionHistory (
        member_code,
        amount_used,
        payment_date,
        status,
        start_date,
        end_date,
        merchant_code,
        original_transation_num     <!-- â­ ì¶”ê°€ë¨ -->
        ) VALUES (
        #{memberCode},
        #{amountUsed},
        NOW(),
        #{status},
        #{startDate},
        #{endDate},
        #{merchantCode},
        #{originalTransationNum}     <!-- â­ ì¶”ê°€ë¨ -->
        )
    </insert>

</mapper>
